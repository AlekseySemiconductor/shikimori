- if user_signed_in? && resource.persisted?
  .block.actions
    .subheadline = i18n_i 'action', :other
    ul.block-list
      - if can? :edit, resource
        li.r-iphone.edit-entry
          a href="#{edit_club_url resource, page: :main}" = t '.edit_club'

      - if can? :broadcast, resource
        li.broadcast
          a href="#{broadcast_club_comments_url resource}" = t '.broadcast'

      - if can? :upload, resource
        li.upload title="#{t '.upload_image_title'}"
          = form_tag upload_club_url(resource), method: :post, multipart: true do
            span = t 'actions.upload_image'
            input type='file' name='image'

      - if can? :invite, resource
        li.invite = t '.invite_to_club'

      - if can?(:join, resource) && !resource.joined?(current_user)
        li.join
          a[
            href="#{club_club_roles_path resource, 'club_role[user_id]' => current_user.id, 'club_role[club_id]' => resource.id}"
            data-method='post'
          ] = t '.join_club'

      - if can?(:leave, resource) && resource.joined?(current_user)
        li.leave
          a[
            href="#{club_club_role_path resource, resource.member_role(current_user)}"
            data-method='delete'
          ] = t '.leave_club'

  .block.invite
    .subheadline = i18n_i 'invitation'
    = simple_form_for [resource, resource.new_invite],
        remote: true,
        authenticity_token: true,
        html: { 'data-type' => :json } do |f|
      = f.input :club_id, as: :hidden
      = f.input :src_id, as: :hidden
      = f.input :dst_id, as: :string, placeholder: t('username')

      = f.button :magic_submit
      .cancel = t 'cancel'
