@import compass/typography/text/ellipsis
@import mixins/block
@import mixins/clear_left
@import mixins/column
@import mixins/comma_separated
@import mixins/link
@import mixins/responsive

.b-db_entry
  +block_m
  +clear_left

  &>.c-image
    // дополнительные стили для gte_ipad определены ниже
    +gte_ipad
      +column(2)
    +iphone-portrait
      +column_b(1)
    +iphone-landscape
      +column_b(2)

  &>.c-about
    // дополнительные стили для gte_ipad определены ниже
    +gte_ipad
      +column(2)
    +iphone-portrait
      +column(1)
    +iphone-landscape
      +column(2)

  .x1200 &>.c-image
    +gt_laptop
      width: 26%
    +ipad_laptop
      width: 30.5%

  .x1200 &>.c-about
    +gt_laptop
      width: 70%
    +ipad_laptop
      width: 65.5%

  .x1200 &>.c-description
    +gt_laptop
      margin-left: 30%
    +ipad_laptop
      margin-left: 34.6%

  .x1000 &>.c-image
    +gte_ipad
      width: 28.5%

  .x1000 &>.c-about
    +gte_ipad
      width: 67.5%

  .x1000 &>.c-description
    +gte_ipad
      margin-left: 32.5%


  &>.c-image
    img
      max-width: 100%

    +iphone-portrait
      .c-poster
        +column(2, 0.57, 7%)

      .c-actions
        +column(2, 0.43, 7%)

        &>a
          display: table
          margin-bottom: 10px
          margin-right: 0
          text-align: left
          width: auto
          height: auto

          &:before
            display: table-cell
            float: left
            font-size: 18px
            vertical-align: middle
            width: 20px

          &:after
            color: #123
            content: attr(data-text)
            display: table-cell
            font-size: 15px
            line-height: 1.3
            padding-left: 10px
            vertical-align: middle
            word-break: break-word

  &>.c-about
    z-index: 1 // без этого нижний блок с description перекрывает текущий

    .c-info-left, .c-info-right
      +column_bm(2, 0.5, 6%)

      +iphone
        +column(1)

    &:after
      display: block
      clear: left

    .additional-links
      +clear_left
      margin-top: 20px

      .key
        float: left
        color: $gray-color-2

      .line-container
        +clear_left

        &>.link, &>a
          +comma_separated(0)
          +link
          float: left
          margin-left: 5px

          &:first-child
            margin-left: 0

  &>.c-description
    +block
    padding-top: 1px // из-за странной баги в фаерфоксе

    +iphone
      clear: both
      margin-left: 0

    .text
      margin-left: 4px
