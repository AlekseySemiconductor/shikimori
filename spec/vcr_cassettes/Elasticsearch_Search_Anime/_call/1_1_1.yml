---
http_interactions:
- request:
    method: get
    uri: http://localhost:9200/shikimori/anime/_search
    body:
      encoding: UTF-8
      string: '{"from":0,"size":10,"query":{"function_score":{"query":{"dis_max":{"queries":[{"bool":{"should":[{"match":{"name.original":{"query":"kai","boost":6}}},{"match":{"name":{"query":"kai","boost":3}}},{"match":{"name.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"russian.original":{"query":"kai","boost":6}}},{"match":{"russian":{"query":"kai","boost":3}}},{"match":{"russian.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"english.original":{"query":"kai","boost":6}}},{"match":{"english":{"query":"kai","boost":3}}},{"match":{"english.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"japanese.original":{"query":"kai","boost":6}}},{"match":{"japanese":{"query":"kai","boost":3}}},{"match":{"japanese.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_0.original":{"query":"kai","boost":6}}},{"match":{"synonym_0":{"query":"kai","boost":3}}},{"match":{"synonym_0.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_1.original":{"query":"kai","boost":6}}},{"match":{"synonym_1":{"query":"kai","boost":3}}},{"match":{"synonym_1.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_2.original":{"query":"kai","boost":6}}},{"match":{"synonym_2":{"query":"kai","boost":3}}},{"match":{"synonym_2.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_3.original":{"query":"kai","boost":6}}},{"match":{"synonym_3":{"query":"kai","boost":3}}},{"match":{"synonym_3.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_4.original":{"query":"kai","boost":6}}},{"match":{"synonym_4":{"query":"kai","boost":3}}},{"match":{"synonym_4.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_5.original":{"query":"kai","boost":6}}},{"match":{"synonym_5":{"query":"kai","boost":3}}},{"match":{"synonym_5.ngram":{"query":"kai"}}}]}}]}},"field_value_factor":{"field":"weight","modifier":"log","factor":1}}}}'
    headers:
      User-Agent:
      - Faraday v0.9.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=UTF-8
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"took":6,"timed_out":false,"_shards":{"total":5,"successful":5,"failed":0},"hits":{"total":192,"max_score":8.934476,"hits":[{"_index":"shikimori","_type":"anime","_id":"22777","_score":8.934476},{"_index":"shikimori","_type":"anime","_id":"6033","_score":8.899003},{"_index":"shikimori","_type":"anime","_id":"1889","_score":8.406054},{"_index":"shikimori","_type":"anime","_id":"29381","_score":8.24814},{"_index":"shikimori","_type":"anime","_id":"19157","_score":8.119291},{"_index":"shikimori","_type":"anime","_id":"692","_score":7.241059},{"_index":"shikimori","_type":"anime","_id":"11359","_score":7.227945},{"_index":"shikimori","_type":"anime","_id":"1883","_score":7.1565905},{"_index":"shikimori","_type":"anime","_id":"29383","_score":7.136165},{"_index":"shikimori","_type":"anime","_id":"2594","_score":6.8629875}]}}'
    http_version: 
  recorded_at: Sun, 27 Nov 2016 14:50:49 GMT
- request:
    method: get
    uri: http://localhost:9200/shikimori//_search
    body:
      encoding: UTF-8
      string: '{"from":0,"size":10,"query":{"function_score":{"query":{"dis_max":{"queries":[{"bool":{"should":[{"match":{"name.original":{"query":"kai","boost":6}}},{"match":{"name":{"query":"kai","boost":3}}},{"match":{"name.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"russian.original":{"query":"kai","boost":6}}},{"match":{"russian":{"query":"kai","boost":3}}},{"match":{"russian.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"english.original":{"query":"kai","boost":6}}},{"match":{"english":{"query":"kai","boost":3}}},{"match":{"english.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"japanese.original":{"query":"kai","boost":6}}},{"match":{"japanese":{"query":"kai","boost":3}}},{"match":{"japanese.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_0.original":{"query":"kai","boost":6}}},{"match":{"synonym_0":{"query":"kai","boost":3}}},{"match":{"synonym_0.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_1.original":{"query":"kai","boost":6}}},{"match":{"synonym_1":{"query":"kai","boost":3}}},{"match":{"synonym_1.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_2.original":{"query":"kai","boost":6}}},{"match":{"synonym_2":{"query":"kai","boost":3}}},{"match":{"synonym_2.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_3.original":{"query":"kai","boost":6}}},{"match":{"synonym_3":{"query":"kai","boost":3}}},{"match":{"synonym_3.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_4.original":{"query":"kai","boost":6}}},{"match":{"synonym_4":{"query":"kai","boost":3}}},{"match":{"synonym_4.ngram":{"query":"kai"}}}]}},{"bool":{"should":[{"match":{"synonym_5.original":{"query":"kai","boost":6}}},{"match":{"synonym_5":{"query":"kai","boost":3}}},{"match":{"synonym_5.ngram":{"query":"kai"}}}]}}]}},"field_value_factor":{"field":"weight","modifier":"log","factor":1}}}}'
    headers:
      User-Agent:
      - Faraday v0.9.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 500
      message: Internal Server Error
    headers:
      Content-Type:
      - application/json; charset=UTF-8
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: '{"error":{"root_cause":[{"type":"exception","reason":"Missing value
        for field [weight]"}],"type":"search_phase_execution_exception","reason":"all
        shards failed","phase":"query","grouped":true,"failed_shards":[{"shard":0,"index":"shikimori","node":"pDVS9cOJSVSFr-or0mnKoQ","reason":{"type":"exception","reason":"Missing
        value for field [weight]"}}],"caused_by":{"type":"exception","reason":"Missing
        value for field [weight]"}},"status":500}'
    http_version: 
  recorded_at: Sun, 27 Nov 2016 14:51:40 GMT
recorded_with: VCR 3.0.3
