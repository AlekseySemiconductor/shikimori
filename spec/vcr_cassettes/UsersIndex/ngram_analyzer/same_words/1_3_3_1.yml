---
http_interactions:
- request:
    method: delete
    uri: http://localhost:9200/shikimori_test_users
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - Faraday v0.12.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '47'
    body:
      encoding: ASCII-8BIT
      string: '{"acknowledged":true}'
    http_version: 
  recorded_at: Tue, 12 Dec 2017 18:17:38 GMT
- request:
    method: put
    uri: http://localhost:9200/shikimori_test_users
    body:
      encoding: UTF-8
      string: '{"settings":{"analysis":{"tokenizer":{"edge_ngram_tokenizer":{"type":"edgeNGram","min_gram":1,"max_gram":30}},"filter":{"edgeNGram_filter":{"type":"edgeNGram","min_gram":1,"max_gram":30,"side":"front"},"nGram_filter":{"type":"nGram","min_gram":1,"max_gram":30},"distinct_words_filter":{"type":"unique","only_on_same_position":true}},"analyzer":{"original_analyzer":{"type":"custom","tokenizer":"keyword","filter":["lowercase","asciifolding"]},"edge_analyzer":{"type":"custom","tokenizer":"standard","filter":["lowercase","asciifolding","edgeNGram_filter"]},"ngram_analyzer":{"type":"custom","tokenizer":"standard","filter":["lowercase","asciifolding","nGram_filter","distinct_words_filter"]},"search_analyzer":{"type":"custom","tokenizer":"standard","filter":["lowercase","asciifolding","distinct_words_filter"]}}}},"mappings":{"user":{"properties":{"nickname":{"fields":{"original":{"index":"analyzed","analyzer":"original_analyzer","type":"string"},"edge":{"index":"analyzed","analyzer":"edge_analyzer","search_analyzer":"search_analyzer","type":"string"},"ngram":{"index":"analyzed","analyzer":"ngram_analyzer","search_analyzer":"search_analyzer","type":"string"}},"type":"keyword","index":"not_analyzed"}}}}}'
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - Faraday v0.12.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Warning:
      - 299 Elasticsearch-5.6.5-6a37571 "Expected a boolean [true/false] for property
        [index] but got [not_analyzed]" "Tue, 12 Dec 2017 18:17:38 GMT"
      - 299 Elasticsearch-5.6.5-6a37571 "The [string] field is deprecated, please
        use [text] or [keyword] instead on [edge]" "Tue, 12 Dec 2017 18:17:38 GMT"
      - 299 Elasticsearch-5.6.5-6a37571 "The [string] field is deprecated, please
        use [text] or [keyword] instead on [ngram]" "Tue, 12 Dec 2017 18:17:38 GMT"
      - 299 Elasticsearch-5.6.5-6a37571 "The [string] field is deprecated, please
        use [text] or [keyword] instead on [original]" "Tue, 12 Dec 2017 18:17:38
        GMT"
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '86'
    body:
      encoding: ASCII-8BIT
      string: '{"acknowledged":true,"shards_acknowledged":true,"index":"shikimori_test_users"}'
    http_version: 
  recorded_at: Tue, 12 Dec 2017 18:17:38 GMT
- request:
    method: get
    uri: http://localhost:9200/shikimori_test_users/_analyze?analyzer=ngram_analyzer&text=tes%20tes
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Warning:
      - 299 Elasticsearch-5.6.5-6a37571 "analyzer request parameter is deprecated
        and will be removed in the next major release. Please use the JSON in the
        request body instead request param" "Tue, 12 Dec 2017 18:17:38 GMT"
      - 299 Elasticsearch-5.6.5-6a37571 "text request parameter is deprecated and
        will be removed in the next major release. Please use the JSON in the request
        body instead request param" "Tue, 12 Dec 2017 18:17:38 GMT"
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '153'
    body:
      encoding: ASCII-8BIT
      string: '{"tokens":[{"token":"t","start_offset":0,"end_offset":3,"type":"<ALPHANUM>","position":0},{"token":"te","start_offset":0,"end_offset":3,"type":"<ALPHANUM>","position":0},{"token":"tes","start_offset":0,"end_offset":3,"type":"<ALPHANUM>","position":0},{"token":"e","start_offset":0,"end_offset":3,"type":"<ALPHANUM>","position":0},{"token":"es","start_offset":0,"end_offset":3,"type":"<ALPHANUM>","position":0},{"token":"s","start_offset":0,"end_offset":3,"type":"<ALPHANUM>","position":0},{"token":"t","start_offset":4,"end_offset":7,"type":"<ALPHANUM>","position":1},{"token":"te","start_offset":4,"end_offset":7,"type":"<ALPHANUM>","position":1},{"token":"tes","start_offset":4,"end_offset":7,"type":"<ALPHANUM>","position":1},{"token":"e","start_offset":4,"end_offset":7,"type":"<ALPHANUM>","position":1},{"token":"es","start_offset":4,"end_offset":7,"type":"<ALPHANUM>","position":1},{"token":"s","start_offset":4,"end_offset":7,"type":"<ALPHANUM>","position":1}]}'
    http_version: 
  recorded_at: Tue, 12 Dec 2017 18:17:38 GMT
- request:
    method: get
    uri: http://localhost:9200/
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - Faraday v0.12.2
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '242'
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "name" : "EGskHAA",
          "cluster_name" : "elasticsearch_morr",
          "cluster_uuid" : "6pEyihhxRCaggNPc9LcVaA",
          "version" : {
            "number" : "5.6.5",
            "build_hash" : "6a37571",
            "build_date" : "2017-12-04T07:50:10.466Z",
            "build_snapshot" : false,
            "lucene_version" : "6.6.1"
          },
          "tagline" : "You Know, for Search"
        }
    http_version: 
  recorded_at: Fri, 05 Jan 2018 22:14:04 GMT
recorded_with: VCR 4.0.0
