---
http_interactions:
- request:
    method: get
    uri: https://vk.com/video17174270_167070090
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML,
        like Gecko) Chrome/39.0.2171.71 Safari/537.36
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache
      Date:
      - Wed, 30 May 2018 01:38:26 GMT
      Content-Type:
      - text/html; charset=windows-1251
      Content-Length:
      - '6894'
      Connection:
      - keep-alive
      X-Powered-By:
      - PHP/3.15458
      Set-Cookie:
      - remixlang=3; expires=Fri, 24 May 2019 21:38:33 GMT; path=/; domain=.vk.com
      - remixlhk=d592125c414ecc44ae; expires=Fri, 31 May 2019 01:35:51 GMT; path=/;
        domain=.vk.com
      Pragma:
      - no-cache
      Cache-Control:
      - no-store
      X-Frame-Options:
      - deny
      Strict-Transport-Security:
      - max-age=15768000
      X-Frontend:
      - front202924
      Access-Control-Expose-Headers:
      - X-Frontend
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        PCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgU3RyaWN0Ly9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMS9EVEQveGh0bWwxLXN0cmljdC5kdGQiPgo8aHRtbCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgeG1sOmxhbmc9ImVuIiBsYW5nPSJlbiI+CjxoZWFkPgo8bWV0YSBodHRwLWVxdWl2PSJYLVVBLUNvbXBhdGlibGUiIGNvbnRlbnQ9IklFPWVkZ2UiIC8+CjxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgaHJlZj0iL2ltYWdlcy9pY29ucy9mYXZpY29ucy9mYXZfbG9nby5pY28/NiIgLz4KCjxsaW5rIHJlbD0iYXBwbGUtdG91Y2gtaWNvbiIgaHJlZj0iL2ltYWdlcy9zYWZhcmlfNjAucG5nPzEiPgo8bGluayByZWw9ImFwcGxlLXRvdWNoLWljb24iIHNpemVzPSI3Nng3NiIgaHJlZj0iL2ltYWdlcy9zYWZhcmlfNzYucG5nPzEiPgo8bGluayByZWw9ImFwcGxlLXRvdWNoLWljb24iIHNpemVzPSIxMjB4MTIwIiBocmVmPSIvaW1hZ2VzL3NhZmFyaV8xMjAucG5nPzEiPgo8bGluayByZWw9ImFwcGxlLXRvdWNoLWljb24iIHNpemVzPSIxNTJ4MTUyIiBocmVmPSIvaW1hZ2VzL3NhZmFyaV8xNTIucG5nPzEiPgoKPG1ldGEgaHR0cC1lcXVpdj0iY29udGVudC10eXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9d2luZG93cy0xMjUxIiAvPgo8bWV0YSBuYW1lPSJkZXNjcmlwdGlvbiIgY29udGVudD0iIiAvPgoKCjx0aXRsZT5FcnJvciB8IFZLPC90aXRsZT4KCjxub3NjcmlwdD48bWV0YSBodHRwLWVxdWl2PSJyZWZyZXNoIiBjb250ZW50PSIwOyBVUkw9L2JhZGJyb3dzZXIucGhwIj48L25vc2NyaXB0PgoKPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL2Nzcy9hbC9jb21tb24uY3NzPzQwNTU4Njk3MTEzIiAvPjxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9Ii9jc3MvYWwvZm9udHNfY250LmNzcz8xMzE4NjUwODIzIiAvPgoKPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgp2YXIgdmsgPSB7CiAgYWRzX3JvdGF0ZV9pbnRlcnZhbDogMTIwMDAwLAogIGFsOiBwYXJzZUludCgnMycpIHx8IDQsCiAgaWQ6IDAsCiAgaW50bmF0OiAnMScgPyB0cnVlIDogZmFsc2UsCiAgaG9zdDogJ3ZrLmNvbScsCiAgbGFuZzogMywKICBydGw6IHBhcnNlSW50KCcnKSB8fCAwLAogIHZlcnNpb246IDYyOTY3MzA5ODE1NzAsCiAgc3REb21haW5zOiAwLAogIHN0RG9tYWluOiAnJywKICBzdEV4Y2x1ZGVkTWFza3M6IFsibG9hZGVyX25hdiIsImxhbmciXSwKICB6ZXJvOiBmYWxzZSwKICBjb250bGVuOiA2NDA4LAogIGxvZ2luc2NoZW1lOiAnaHR0cHMnLAogIGlwX2g6ICdlNDQ5NWMwNTlhOWZlMWMyYjEnLAogIG5hdlByZWZpeDogJy8nLAogIGR0OiBwYXJzZUludCgnMCcpIHx8IDAsCiAgZnM6IHBhcnNlSW50KCcxMycpIHx8IDEzLAogIHRzOiAxNTI3NjQ0MzA2LAogIHR6OiAxMDgwMCwKICBwZDogMCwKICBjc3NfZGlyOiAnJywKICB2Y29zdDogNywKICB0aW1lOiBbMjAxOCwgNSwgMzAsIDQsIDM4LCAyNl0sCiAgc2FtcGxlVXNlcjogLTEsIHNwZW50TGFzdFNlbmRUUzogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgYTExeTogMCwKICBzdGF0dXNFeHBvcnRIYXNoOiAnJywKICBhdWRpb0Fkc0NvbmZpZzogeyJfIjoiXyJ9LAogIGxvbmdWaWV3VGVzdEdyb3VwOiAiZXZlcnlfdmlldyIsCiAgY21hOiAxLAogIHBvc3ROb0VuY29kZTogMCwKICBscENvbmZpZzogewogICAgZW5hYmxlZDogMCwKICAgIGtleTogJycsCiAgICB0czogMCwKICAgIHVybDogJycsCiAgICBscHN0YXQ6IDAKICB9LAoKICBwcl90cGw6ICI8ZGl2IGNsYXNzPVwicHIgJWNscyVcIiBpZD1cIiVpZCVcIj48ZGl2IGNsYXNzPVwicHJfYnRcIj48XC9kaXY+PGRpdiBjbGFzcz1cInByX2J0XCI+PFwvZGl2PjxkaXYgY2xhc3M9XCJwcl9idFwiPjxcL2Rpdj48XC9kaXY+IiwKCiAgYXVkaW9JbmxpbmVQbGF5ZXJUcGw6ICI8ZGl2IGNsYXNzPVwiYXVkaW9faW5saW5lX3BsYXllciBfYXVkaW9faW5saW5lX3BsYXllciBub19zZWxlY3RcIj5cbiAgPGRpdiBjbGFzcz1cImF1ZGlvX2lubGluZV9wbGF5ZXJfcmlnaHRcIj5cbiAgICA8ZGl2IGNsYXNzPVwiYXVkaW9faW5saW5lX3BsYXllcl92b2x1bWVcIj48XC9kaXY+XG4gIDxcL2Rpdj5cbiAgPGRpdiBjbGFzcz1cImF1ZGlvX2lubGluZV9wbGF5ZXJfbGVmdFwiPlxuICAgIDxkaXYgY2xhc3M9XCJhdWRpb19pbmxpbmVfcGxheWVyX3Byb2dyZXNzXCI+PFwvZGl2PlxuICA8XC9kaXY+XG48XC9kaXY+IiwKCiAgdG5zUGl4ZWxUeXBlOiAndW5hdXRoJwp9OwoKd2luZG93LmxvY0RvbWFpbiA9IHZrLmhvc3QubWF0Y2goL1thLXpBLVpdK1wuW2EtekEtWl0rXC4/JC8pWzBdOwp2YXIgX3VhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpOwppZiAoL29wZXJhL2kudGVzdChfdWEpIHx8ICEvbXNpZSA2L2kudGVzdChfdWEpIHx8IGRvY3VtZW50LmRvbWFpbiAhPSBsb2NEb21haW4pIGRvY3VtZW50LmRvbWFpbiA9IGxvY0RvbWFpbjsKdmFyIF9fX2h0ZXN0ID0gKGxvY2F0aW9uLnRvU3RyaW5nKCkubWF0Y2goLyMoLiopLykgfHwge30pWzFdIHx8ICcnLCBfX190bzsKX19faHRlc3QgPSBfX19odGVzdC5zcGxpdCgnIycpLnBvcCgpOwppZiAodmsuYWwgIT0gMSAmJiBfX19odGVzdC5sZW5ndGggJiYgX19faHRlc3Quc3Vic3RyKDAsIDEpID09IHZrLm5hdlByZWZpeCkgewogIGlmICh2ay5hbCAhPSAzIHx8IHZrLm5hdlByZWZpeCAhPSAnIScpIHsKICAgIF9fX3RvID0gX19faHRlc3QucmVwbGFjZSgvXihcL3whKS8sICcnKTsKICAgIGlmIChfX190by5tYXRjaCgvXihbXlw/XSpcLnBocHxsb2dpbnxtb2JpbGUpKFteYS16MC05XC5dfCQpLykpIF9fX3RvID0gJyc7CiAgICBsb2NhdGlvbi5yZXBsYWNlKGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3QgKyAnLycgKyBfX190byk7CiAgfQp9Cgp2YXIgU3RhdGljRmlsZXMgPSB7CiAgJ2Ntb2R1bGVzL3dlYi9jb21tb25fd2ViLmpzJyA6IHt2OiAzfSwKICAnY29tbW9uLmNzcycgOiB7djogNDA1NTg2OTcxMTN9LCdmb250c19jbnQuY3NzJyA6IHt2OiAxMzE4NjUwODIzfQogICwnbGFuZzNfMC5qcyc6IHt2OiAyNTQ2MDczOH0sJ3ZpZGVvLmNzcyc6e3Y6MzMxOTU5MTIwMDN9LCd2aWRlby5qcyc6e3Y6MTUyOTMwMTIxM30sJ3ZpZGVvY2F0LmNzcyc6e3Y6Mjc5MTA1MjE2MjZ9LCd2aWRlb2NhdC5qcyc6e3Y6MzU5MDI5ODY4OX0sJ2luZGV4ZXIuanMnOnt2OjE3MDAzNDM4Mjh9LCd1aV9jb250cm9scy5qcyc6e3Y6NzIyODU4ODc1fSwndWlfY29udHJvbHMuY3NzJzp7djoxODY1NTQ4ODI5NH0sJ3ZpZGVvdmlldy5qcyc6e3Y6MTA4NTI3Mjk1MTR9LCd2aWRlb3ZpZXcuY3NzJzp7djozMTAzNTE2OTQzMH0sJ3ZpZGVvX3VwbG9hZC5qcyc6e3Y6NTI5MTkxNTQ2M30sJ3NlYXJjaC5qcyc6e3Y6NDI3OTY0OTY1Mn0sJ2dyaWRfc29ydGVyLmpzJzp7djozMTcwNDgyMTUwfSwnc3VnZ2VzdGVyLmpzJzp7djoxMDQ5OTA5ODExfSwndWlfY29tbW9uLmNzcyc6e3Y6MTg1OTI5NDY1NDB9LCd1aV9jb21tb24uanMnOnt2OjI4MzA4NTYyNDN9LCdwYWdlLmNzcyc6e3Y6NDEwMDIzNjE1MzF9LCdwYWdlLmpzJzp7djo0ODY5NzI5NjJ9LCd1bmNvbW1vbi5jc3MnOnt2OjE3NjIzNzMxNTc4fSwnY29va2llc19wb2xpY3kuY3NzJzp7djoxfSwndGltZV9zcGVudC5qcyc6e3Y6NzMyNjM3MDg1fSwnY21vZHVsZXMvd2ViL3BhZ2VfbGF5b3V0LmpzJzp7djoxMTcyNDA5MzkyfSwnYXVkaW9wbGF5ZXIuanMnOnt2OjU5MDA3MjU4MTJ9LCdjbW9kdWxlcy93ZWIvbGlrZXMuanMnOnt2OjF9LCdjbW9kdWxlcy93ZWIvZ3JpcC5qcyc6e3Y6NDE2NDUwMTQ5Mn0KfQp2YXIgYWJwOwo8L3NjcmlwdD4KCjxsaW5rIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ii9jc3MvYWwvdmlkZW8uY3NzPzMzMTk1OTEyMDAzIj48L2xpbms+PGxpbmsgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iL2Nzcy9hbC92aWRlb2NhdC5jc3M/Mjc5MTA1MjE2MjYiPjwvbGluaz48bGluayB0eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIvY3NzL3VpX2NvbnRyb2xzLmNzcz8xODY1NTQ4ODI5NCI+PC9saW5rPjxsaW5rIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ii9jc3MvYWwvdmlkZW92aWV3LmNzcz8zMTAzNTE2OTQzMCI+PC9saW5rPjxsaW5rIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ii9jc3MvYWwvdWlfY29tbW9uLmNzcz8xODU5Mjk0NjU0MCI+PC9saW5rPjxsaW5rIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ii9jc3MvYWwvcGFnZS5jc3M/NDEwMDIzNjE1MzEiPjwvbGluaz48bGluayB0eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIvY3NzL2FsL3VuY29tbW9uLmNzcz8xNzYyMzczMTU3OCI+PC9saW5rPjxsaW5rIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ii9jc3MvYWwvY29va2llc19wb2xpY3kuY3NzPzEiPjwvbGluaz48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvanMvbG9hZGVyX25hdjYyOTY3MzA5ODE1NzBfMy5qcyI+PC9zY3JpcHQ+PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL2pzL2Ntb2R1bGVzL3dlYi9jb21tb25fd2ViLmpzPzNfNjk2NjYzMTMwMTEiPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9qcy9sYW5nM18wLmpzPzI1NDYwNzM4Ij48L3NjcmlwdD48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvanMvbGliL3B4LmpzP2NoPTEiPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9qcy9saWIvcHguanM/Y2g9MiI+PC9zY3JpcHQ+PG1ldGEgbmFtZT0icm9ib3RzIiBjb250ZW50PSJub2luZGV4IiAvPjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9qcy9hbC92aWRlby5qcz8xNTI5MzAxMjEzIj48L3NjcmlwdD48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvanMvYWwvdmlkZW9jYXQuanM/MzU5MDI5ODY4OSI+PC9zY3JpcHQ+PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL2pzL2FsL2luZGV4ZXIuanM/MTcwMDM0MzgyOCI+PC9zY3JpcHQ+PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL2pzL2xpYi91aV9jb250cm9scy5qcz83MjI4NTg4NzUiPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9qcy9jbW9kdWxlcy93ZWIvdmlkZW92aWV3LmpzPzEwODUyNzI5NTE0Ij48L3NjcmlwdD48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvanMvY21vZHVsZXMvd2ViL3ZpZGVvX3VwbG9hZC5qcz81MjkxOTE1NDYzIj48L3NjcmlwdD48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvanMvYWwvc2VhcmNoLmpzPzQyNzk2NDk2NTIiPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9qcy9hbC9ncmlkX3NvcnRlci5qcz8zMTcwNDgyMTUwIj48L3NjcmlwdD48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvanMvYWwvc3VnZ2VzdGVyLmpzPzEwNDk5MDk4MTEiPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9qcy9hbC91aV9jb21tb24uanM/MjgzMDg1NjI0MyI+PC9zY3JpcHQ+PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL2pzL2FsL3BhZ2UuanM/NDg2OTcyOTYyIj48L3NjcmlwdD48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvanMvYWwvdGltZV9zcGVudC5qcz83MzI2MzcwODUiPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9qcy9jbW9kdWxlcy93ZWIvcGFnZV9sYXlvdXQuanM/MTE3MjQwOTM5MiI+PC9zY3JpcHQ+PHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iL2pzL2Ntb2R1bGVzL3dlYi9hdWRpb3BsYXllci5qcz81OTAwNzI1ODEyIj48L3NjcmlwdD48c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvanMvY21vZHVsZXMvd2ViL2xpa2VzLmpzPzEiPjwvc2NyaXB0PjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii9qcy9jbW9kdWxlcy93ZWIvZ3JpcC5qcz80MTY0NTAxNDkyIj48L3NjcmlwdD4KCjwvaGVhZD4KCjxib2R5IG9ucmVzaXplPSJvbkJvZHlSZXNpemUoKSIgY2xhc3M9Im1hYyBzZiAiPgogIDxkaXYgaWQ9InN5c3RlbV9tc2ciIGNsYXNzPSJmaXhlZCI+PC9kaXY+CiAgPGRpdiBpZD0idXRpbHMiPjwvZGl2PgoKICA8ZGl2IGlkPSJsYXllcl9iZyIgY2xhc3M9ImZpeGVkIj48L2Rpdj48ZGl2IGlkPSJsYXllcl93cmFwIiBjbGFzcz0ic2Nyb2xsX2ZpeF93cmFwIGZpeGVkIGxheWVyX3dyYXAiPjxkaXYgaWQ9ImxheWVyIj48L2Rpdj48L2Rpdj4KICA8ZGl2IGlkPSJib3hfbGF5ZXJfYmciIGNsYXNzPSJmaXhlZCI+PC9kaXY+PGRpdiBpZD0iYm94X2xheWVyX3dyYXAiIGNsYXNzPSJzY3JvbGxfZml4X3dyYXAgZml4ZWQiPjxkaXYgaWQ9ImJveF9sYXllciI+PGRpdiBpZD0iYm94X2xvYWRlciI+PGRpdiBjbGFzcz0icHIgcHJfYmF3IHByX21lZGl1bSIgaWQ9ImJveF9sb2FkZXJfcHIiPjxkaXYgY2xhc3M9InByX2J0Ij48L2Rpdj48ZGl2IGNsYXNzPSJwcl9idCI+PC9kaXY+PGRpdiBjbGFzcz0icHJfYnQiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImJhY2siPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PgoKICA8ZGl2IGlkPSJzdGxfbGVmdCI+PC9kaXY+PGRpdiBpZD0ic3RsX3NpZGUiPjwvZGl2PgoKICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+d2luZG93LmRvbVN0YXJ0ZWQgJiYgZG9tU3RhcnRlZCgpOzwvc2NyaXB0PgoKICA8ZGl2IGNsYXNzPSJzY3JvbGxfZml4X3dyYXAgX3BhZ2Vfd3JhcCIgaWQ9InBhZ2Vfd3JhcCI+PGRpdj48ZGl2IGNsYXNzPSJzY3JvbGxfZml4Ij4KICAKCiAgPGRpdiBpZD0icGFnZV9oZWFkZXJfY29udCIgY2xhc3M9InBhZ2VfaGVhZGVyX2NvbnQiPgogICAgPGRpdiBjbGFzcz0iYmFjayI+PC9kaXY+CiAgICA8ZGl2IGlkPSJwYWdlX2hlYWRlcl93cmFwIiBjbGFzcz0icGFnZV9oZWFkZXJfd3JhcCI+CiAgICAgIDxhIGNsYXNzPSJ0b3BfYmFja19saW5rIiBocmVmPSIiIGlkPSJ0b3BfYmFja19saW5rIiBvbmNsaWNrPSJpZiAobmF2LmdvKHRoaXMsIGV2ZW50LCB7YmFjazogdHJ1ZX0pID09PSBmYWxzZSkgeyBzaG93QmFja0xpbmsoKTsgcmV0dXJuIGZhbHNlOyB9IiBvbm1vdXNlZG93bj0idG5BY3RpdmUodGhpcykiPjwvYT4KICAgICAgPGRpdiBpZD0icGFnZV9oZWFkZXIiIGNsYXNzPSJwX2hlYWQxIHBfaGVhZF9sMyIgc3R5bGU9IndpZHRoOiA5NjBweCI+CiAgICAgICAgPGRpdiBjbGFzcz0iY29udGVudCI+CiAgICAgICAgICA8ZGl2IGlkPSJ0b3BfbmF2IiBjbGFzcz0iaGVhZF9uYXYiPgogIDxkaXYgY2xhc3M9ImhlYWRfbmF2X2l0ZW0gZmxfbCI+PGEgY2xhc3M9InRvcF9ob21lX2xpbmsgZmxfbCAiIGhyZWY9Ii8iIGFyaWEtbGFiZWw9IkhvbWUiIGFjY2Vzc2tleT0iMSIgPjxkaXYgY2xhc3M9InRvcF9ob21lX2xvZ28iPjwvZGl2PjwvYT48L2Rpdj4KICA8ZGl2IGNsYXNzPSJoZWFkX25hdl9pdGVtIGZsX2wiPjxkaXYgaWQ9InRzX3dyYXAiIGNsYXNzPSJ0c193cmFwIiBvbm1vdXNlb3Zlcj0iVG9wU2VhcmNoLmluaXRGcmllbmRzTGlzdCgpOyI+CiAgPGlucHV0IG5hbWU9ImRpc2FibGUtYXV0b2ZpbGwiIHN0eWxlPSJkaXNwbGF5OiBub25lOyIgLz4KICA8aW5wdXQgdHlwZT0idGV4dCIgb25tb3VzZWRvd249ImV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7IiBvbnRvdWNoc3RhcnQ9ImV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7IiBjbGFzcz0idGV4dCB0c19pbnB1dCIgaWQ9InRzX2lucHV0IiBhdXRvY29tcGxldGU9Im9mZiIgbmFtZT0iZGlzYWJsZS1hdXRvZmlsbCIgcGxhY2Vob2xkZXI9IlNlYXJjaCIgYXJpYS1sYWJlbD0iU2VhcmNoIiAvPgo8L2Rpdj48L2Rpdj4KICA8ZGl2IGNsYXNzPSJoZWFkX25hdl9pdGVtIGZsX2wgaGVhZF9uYXZfYnRucyI+PHNwYW4gaWQ9InRvcF9hdWRpb19sYXllcl9wbGFjZSI+PC9zcGFuPjwvZGl2PgogIDxkaXYgY2xhc3M9ImhlYWRfbmF2X2l0ZW0gZmxfciI+PGEgY2xhc3M9InRvcF9uYXZfbGluayIgaHJlZj0iIiBpZD0idG9wX3N3aXRjaF9sYW5nIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiIG9uY2xpY2s9ImFqYXgucG9zdCgnYWxfaW5kZXgucGhwJywge2FjdDogJ2NoYW5nZV9sYW5nJywgbGFuZ19pZDogMywgaGFzaDogJycgfSk7IHJldHVybiBmYWxzZTsiIG9ubW91c2Vkb3duPSJ0bkFjdGl2ZSh0aGlzKSI+CiAgU3dpdGNoIHRvIEVuZ2xpc2gKPC9hPjxhIGNsYXNzPSJ0b3BfbmF2X2xpbmsiIGhyZWY9Ii9qb2luIiBpZD0idG9wX3JlZ19saW5rIiBzdHlsZT0iIiBvbmNsaWNrPSJyZXR1cm4gIXNob3dCb3goJ2pvaW4ucGhwJywge2FjdDogJ2JveCcsIGZyb206IG5hdi5zdHJMb2N9LCB7fSwgZXZlbnQpIiBvbm1vdXNlZG93bj0idG5BY3RpdmUodGhpcykiPgogIHNpZ24gdXAKPC9hPjwvZGl2PgogIDxkaXYgY2xhc3M9ImhlYWRfbmF2X2l0ZW1fcGxheWVyIj48L2Rpdj4KPC9kaXY+CjxkaXYgaWQ9InRzX2NvbnRfd3JhcCIgY2xhc3M9InRzX2NvbnRfd3JhcCIgb250b3VjaHN0YXJ0PSJldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlOyIgb25tb3VzZWRvd249ImV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPGRpdiBpZD0icGFnZV9sYXlvdXQiIHN0eWxlPSJ3aWR0aDogOTYwcHg7Ij4KICAgIDxkaXYgaWQ9InNpZGVfYmFyIiBjbGFzcz0ic2lkZV9iYXIgZmxfbCAiIHN0eWxlPSIiPgogICAgICA8ZGl2IGlkPSJzaWRlX2Jhcl9pbm5lciIgY2xhc3M9InNpZGVfYmFyX2lubmVyIj4KICAgICAgICA8ZGl2IGlkPSJxdWlja19sb2dpbiIgY2xhc3M9InF1aWNrX2xvZ2luIj4KICA8Zm9ybSBtZXRob2Q9IlBPU1QiIG5hbWU9ImxvZ2luIiBpZD0icXVpY2tfbG9naW5fZm9ybSIgYWN0aW9uPSJodHRwczovL2xvZ2luLnZrLmNvbS8/YWN0PWxvZ2luIj4KICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImFjdCIgdmFsdWU9ImxvZ2luIiAvPgogICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icm9sZSIgdmFsdWU9ImFsX2ZyYW1lIiAvPgogICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iZXhwaXJlIiBpZD0icXVpY2tfZXhwaXJlX2lucHV0IiB2YWx1ZT0iIiAvPgogICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icmVjYXB0Y2hhIiBpZD0icXVpY2tfcmVjYXB0Y2hhIiB2YWx1ZT0iIiAvPgogICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY2FwdGNoYV9zaWQiIGlkPSJxdWlja19jYXB0Y2hhX3NpZCIgdmFsdWU9IiIgLz4KICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImNhcHRjaGFfa2V5IiBpZD0icXVpY2tfY2FwdGNoYV9rZXkiIHZhbHVlPSIiIC8+CiAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJfb3JpZ2luIiB2YWx1ZT0iaHR0cHM6Ly92ay5jb20iIC8+CiAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJpcF9oIiB2YWx1ZT0iZTQ0OTVjMDU5YTlmZTFjMmIxIiAvPgogICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ibGdfaCIgdmFsdWU9Ijk5OGVkYzJjYTIxMjBiZTBiZCIgLz4KICAgIDxkaXYgY2xhc3M9ImxhYmVsIj5QaG9uZSBvciBlbWFpbDwvZGl2PgogICAgPGRpdiBjbGFzcz0ibGFiZWxlZCI+PGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImVtYWlsIiBjbGFzcz0iZGFyayIgaWQ9InF1aWNrX2VtYWlsIiAvPjwvZGl2PgogICAgPGRpdiBjbGFzcz0ibGFiZWwiPlBhc3N3b3JkPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJsYWJlbGVkIj48aW5wdXQgdHlwZT0icGFzc3dvcmQiIG5hbWU9InBhc3MiIGNsYXNzPSJkYXJrIiBpZD0icXVpY2tfcGFzcyIgb25rZXl1cD0idG9nZ2xlKCdxdWlja19leHBpcmUnLCAhIXRoaXMudmFsdWUpO3RvZ2dsZSgncXVpY2tfZm9yZ290JywgIXRoaXMudmFsdWUpIiAvPjwvZGl2PgogICAgPGlucHV0IHR5cGU9InN1Ym1pdCIgY2xhc3M9InN1Ym1pdCIgLz4KICA8L2Zvcm0+CiAgPGJ1dHRvbiBjbGFzcz0icXVpY2tfbG9naW5fYnV0dG9uIGZsYXRfYnV0dG9uIGJ1dHRvbl93aWRlIiBpZD0icXVpY2tfbG9naW5fYnV0dG9uIj5Mb2cgaW48L2J1dHRvbj4KICA8YnV0dG9uIGNsYXNzPSJxdWlja19yZWdfYnV0dG9uIGZsYXRfYnV0dG9uIGJ1dHRvbl93aWRlIiBpZD0icXVpY2tfcmVnX2J1dHRvbiIgc3R5bGU9IiIgb25jbGljaz0idG9wLnNob3dCb3goJ2pvaW4ucGhwJywge2FjdDogJ2JveCcsIGZyb206IG5hdi5zdHJMb2N9KSI+U2lnbiB1cDwvYnV0dG9uPgogIDxkaXYgY2xhc3M9ImNsZWFyIGZvcmdvdCI+PGRpdiBjbGFzcz0iY2hlY2tib3giIGlkPSJxdWlja19leHBpcmUiIG9uY2xpY2s9ImNoZWNrYm94KHRoaXMpO2dlKCdxdWlja19leHBpcmVfaW5wdXQnKS52YWx1ZT1pc0NoZWNrZWQodGhpcyk/MTonJzsiPkRvbiYjMzk7dCByZW1lbWJlciBtZTwvZGl2PjxhIGlkPSJxdWlja19mb3Jnb3QiIGNsYXNzPSJxdWlja19mb3Jnb3QiIGhyZWY9Ii9yZXN0b3JlIiB0YXJnZXQ9Il90b3AiPkZvcmdvdCB5b3VyIHBhc3N3b3JkPzwvYT48L2Rpdj4KPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0icGFnZV9ib2R5IiBjbGFzcz0iZmxfciAiIHN0eWxlPSJ3aWR0aDogNzk1cHg7Ij4KICAgICAgPGRpdiBpZD0iaGVhZGVyX3dyYXAyIj4KICAgICAgICA8ZGl2IGlkPSJoZWFkZXJfd3JhcDEiPgogICAgICAgICAgPGRpdiBpZD0iaGVhZGVyIiBzdHlsZT0iZGlzcGxheTogbm9uZSI+CiAgICAgICAgICAgIDxoMSBpZD0idGl0bGUiPjwvaDE+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgaWQ9IndyYXBfYmV0d2VlbiI+PC9kaXY+CiAgICAgIDxkaXYgaWQ9IndyYXAzIj48ZGl2IGlkPSJ3cmFwMiI+CiAgPGRpdiBpZD0id3JhcDEiPgogICAgPGRpdiBpZD0iY29udGVudCI+PGRpdiBjbGFzcz0ibWVzc2FnZV9wYWdlIHBhZ2VfYmxvY2siPgogIDxkaXYgY2xhc3M9Im1lc3NhZ2VfcGFnZV90aXRsZSI+RXJyb3I8L2Rpdj4KICA8ZGl2IGNsYXNzPSJtZXNzYWdlX3BhZ2VfYm9keSI+CiAgICBBY2Nlc3MgZGVuaWVkCiAgICA8YnV0dG9uIGNsYXNzPSJmbGF0X2J1dHRvbiBtZXNzYWdlX3BhZ2VfYnRuIiBpZD0ibXNnX2JhY2tfYnV0dG9uIj5CYWNrPC9idXR0b24+CiAgPC9kaXY+CjwvZGl2PjwvZGl2PgogIDwvZGl2Pgo8L2Rpdj48L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9ImZvb3Rlcl93cmFwIiBjbGFzcz0iZm9vdGVyX3dyYXAgZmxfciIgc3R5bGU9IndpZHRoOiA3OTVweDsiPjxkaXYgY2xhc3M9ImZvb3Rlcl9uYXYiIGlkPSJib3R0b21fbmF2Ij4KICA8ZGl2IGNsYXNzPSJmb290ZXJfY29weSBmbF9sIj48YSBocmVmPSIvYWJvdXQiPlZLPC9hPiAmY29weTsgMjAxODwvZGl2PgogIDxkaXYgY2xhc3M9ImZvb3Rlcl9sYW5nIGZsX3IiPkxhbmd1YWdlOjxhIGNsYXNzPSJmb290ZXJfbGFuZ19saW5rIiBvbmNsaWNrPSJhamF4LnBvc3QoJ2FsX2luZGV4LnBocCcsIHthY3Q6ICdjaGFuZ2VfbGFuZycsIGxhbmdfaWQ6IDMsIGhhc2g6ICdkZWM0M2U0MGQzMDhhYWU4NzMnfSkiPkVuZ2xpc2g8L2E+PGEgY2xhc3M9ImZvb3Rlcl9sYW5nX2xpbmsiIG9uY2xpY2s9ImFqYXgucG9zdCgnYWxfaW5kZXgucGhwJywge2FjdDogJ2NoYW5nZV9sYW5nJywgbGFuZ19pZDogMCwgaGFzaDogJ2RlYzQzZTQwZDMwOGFhZTg3Myd9KSI+0PPx8ero6TwvYT48YSBjbGFzcz0iZm9vdGVyX2xhbmdfbGluayIgb25jbGljaz0iYWpheC5wb3N0KCdhbF9pbmRleC5waHAnLCB7YWN0OiAnY2hhbmdlX2xhbmcnLCBsYW5nX2lkOiAxLCBoYXNoOiAnZGVjNDNlNDBkMzA4YWFlODczJ30pIj7T6vDgv+3x/OrgPC9hPjxhIGNsYXNzPSJmb290ZXJfbGFuZ19saW5rIiBvbmNsaWNrPSJpZiAodmsuYWwpIHsgc2hvd0JveCgnbGFuZy5waHAnLCB7YWN0OiAnbGFuZ19kaWFsb2cnLCBhbGw6IDF9LCB7cGFyYW1zOiB7ZGFyazogdHJ1ZSwgYm9keVN0eWxlOiAncGFkZGluZzogMHB4J30sIG5vcmVsb2FkOiB0cnVlfSk7IH0gZWxzZSB7IGNoYW5nZUxhbmcoMSk7IH0gcmV0dXJuIGZhbHNlOyI+YWxsIGxhbmd1YWdlcyC7PC9hPjwvZGl2PgogIDxkaXYgY2xhc3M9ImZvb3Rlcl9saW5rcyI+CiAgICA8YSBjbGFzcz0iYm5hdl9hIiBocmVmPSIvYWJvdXQiPmFib3V0PC9hPgogICAgPGEgY2xhc3M9ImJuYXZfYSIgaHJlZj0iL3N1cHBvcnQ/YWN0PWhvbWUiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+c3VwcG9ydDwvYT4KICAgIDxhIGNsYXNzPSJibmF2X2EiIGhyZWY9Ii90ZXJtcyI+dGVybXM8L2E+CiAgICA8YSBjbGFzcz0iYm5hdl9hIiBocmVmPSIvYWRzIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPmFkdmVydGlzaW5nPC9hPgogICAgCiAgICA8YSBjbGFzcz0iYm5hdl9hIiBocmVmPSIvZGV2Ij5kZXZlbG9wZXJzPC9hPgogICAgPGEgY2xhc3M9ImJuYXZfYSIgaHJlZj0iL2pvYnMiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+am9iczwvYT4KICA8L2Rpdj4KPC9kaXY+Cgo8ZGl2IGNsYXNzPSJmb290ZXJfYmVuY2ggY2xlYXIiPgogIAo8L2Rpdj48L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImNsZWFyIj48L2Rpdj4KICA8L2Rpdj4KPC9kaXY+PC9kaXY+PGRpdiBpZD0iY29va2llc19wb2xpY3lfd3JhcCIgY2xhc3M9ImNvb2tpZXNfcG9saWN5X3dyYXAiPgogIDxkaXYgY2xhc3M9ImNvb2tpZXNfcG9saWN5IiBzdHlsZT0id2lkdGg6OTYwcHg7Ij4KICAgIDxzcGFuIGNsYXNzPSJjb29raWVzX3BvbGljeV9pY29uIj48L3NwYW4+CiAgICA8c3BhbiBjbGFzcz0iY29va2llc19wb2xpY3lfdGV4dCI+QnkgY29udGludWluZyB0byBicm93c2UsIHlvdSBjb25zZW50IHRvIG91ciB1c2Ugb2YgY29va2llcy4gWW91IGNhbiByZWFkIG91ciBDb29raWUgUG9saWN5IDxhIGhyZWY9Ii9wcml2YWN5L2Nvb2tpZXMiPmhlcmU8L2E+Ljwvc3Bhbj4KICAgIDxzcGFuIGNsYXNzPSJjb29raWVzX3BvbGljeV9jbG9zZSIgb25jbGljaz0iaGlkZUNvb2tpZXNQb2xpY3koKTsiPjwvc3Bhbj4KICA8L2Rpdj4KPC9kaXY+PG5vc2NyaXB0PjxkaXYgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTEwMDAwcHg7Ij4KPGltZyBzcmM9Ii8vdG9wLWZ3ejEubWFpbC5ydS9jb3VudGVyP2lkPTI1Nzk0Mzc7anM9bmEiIHN0eWxlPSJib3JkZXI6MDsiIGhlaWdodD0iMSIgd2lkdGg9IjEiIC8+CjwvZGl2Pjwvbm9zY3JpcHQ+PC9kaXY+CiAgPGRpdiBjbGFzcz0icHJvZ3Jlc3MiIGlkPSJnbG9iYWxfcHJnIj48L2Rpdj4KCiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgogICAgaWYgKHBhcmVudCAmJiBwYXJlbnQgIT0gd2luZG93ICYmIChicm93c2VyLm1zaWUgfHwgYnJvd3Nlci5vcGVyYSB8fCBicm93c2VyLm1vemlsbGEgfHwgYnJvd3Nlci5jaHJvbWUgfHwgYnJvd3Nlci5zYWZhcmkgfHwgYnJvd3Nlci5pcGhvbmUpKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uaW5uZXJIVE1MID0gJyc7CiAgICB9IGVsc2UgewogICAgICB3aW5kb3cuZG9tUmVhZHkgJiYgZG9tUmVhZHkoKTsKICAgICAgdXBkYXRlTW9uZXkoMCk7CmluaXRQYWdlTGF5b3V0VUkoKTsKaWYgKGJyb3dzZXIuaXBob25lIHx8IGJyb3dzZXIuaXBhZCB8fCBicm93c2VyLmlwb2QpIHsKICBzZXRTdHlsZShib2R5Tm9kZSwge3dlYmtpdFRleHRTaXplQWRqdXN0OiAnbm9uZSd9KTsKfXZhciBxZiA9IGdlKCdxdWlja19sb2dpbl9mb3JtJyksIHFsID0gZ2UoJ3F1aWNrX2xvZ2luJyksIHFlID0gZ2UoJ3F1aWNrX2VtYWlsJyksIHFwID0gZ2UoJ3F1aWNrX3Bhc3MnKTsKdmFyIHFsYiA9IGdlKCdxdWlja19sb2dpbl9idXR0b24nKSwgcHJnQnRuID0gcWxiOwoKdmFyIHFpbml0ID0gZnVuY3Rpb24oKSB7CiAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgIHFsLmluc2VydEJlZm9yZShjZSgnZGl2Jywge2lubmVySFRNTDogJzxpZnJhbWUgY2xhc3M9InVwbG9hZF9mcmFtZSIgaWQ9InF1aWNrX2xvZ2luX2ZyYW1lIiBuYW1lPSJxdWlja19sb2dpbl9mcmFtZSI+PC9pZnJhbWU+J30pLCBxZik7CiAgICBxZi50YXJnZXQgPSAncXVpY2tfbG9naW5fZnJhbWUnOwogICAgcWUub25jbGljayA9IGxvZ2luQnlDcmVkZW50aWFsOwogICAgcXAub25jbGljayA9IGxvZ2luQnlDcmVkZW50aWFsOwogIH0sIDEpOwp9CgppZiAod2luZG93LnRvcCAmJiB3aW5kb3cudG9wICE9IHdpbmRvdykgewogIHdpbmRvdy5vbmxvYWQgPSBxaW5pdDsKfSBlbHNlIHsKICBzZXRUaW1lb3V0KHFpbml0LCAwKTsKfQoKcWYub25zdWJtaXQgPSBmdW5jdGlvbigpIHsKICBpZiAoIWdlKCdxdWlja19sb2dpbl9mcmFtZScpKSByZXR1cm4gZmFsc2U7CiAgaWYgKCF0cmltKHFlLnZhbHVlKSkgewogICAgbm90YUJlbmUocWUpOwogICAgcmV0dXJuIGZhbHNlOwogIH0gZWxzZSBpZiAoIXRyaW0ocXAudmFsdWUpKSB7CiAgICBub3RhQmVuZShxcCk7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGxvY2tCdXR0b24od2luZG93Ll9fcWZCdG4gPSBwcmdCdG4pOwogIHByZ0J0biA9IHFsYjsKICBjbGVhclRpbWVvdXQoX19xbFRpbWVyKTsKICBfX3FsVGltZXIgPSBzZXRUaW1lb3V0KGxvZ2luU3VibWl0RXJyb3IsIDMwMDAwKTsKICBkb21GQyhkb21QUyhxZikpLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgY2xlYXJUaW1lb3V0KF9fcWxUaW1lcik7CiAgICBfX3FsVGltZXIgPSBzZXRUaW1lb3V0KGxvZ2luU3VibWl0RXJyb3IsIDI1MDApOwogIH0KICByZXR1cm4gdHJ1ZTsKfQoKd2luZG93LmxvZ2luU3VibWl0RXJyb3IgPSBmdW5jdGlvbigpIHsKICBzaG93RmFzdEJveCgnV2FybmluZycsICdVbmFibGUgdG8gY29tcGxldGUgZW5jcnlwdGVkIGF1dGhvcml6YXRpb24uIFRoaXMgY2FuIGhhcHBlbiBpZiB5b3VyIGRhdGUgYW5kIHRpbWUgc2V0dGluZ3MgYXJlIG5vdCBjb25maWd1cmVkIGNvcnJlY3RseSBvbiB5b3VyIHN5c3RlbS4gUGxlYXNlIGNoZWNrIHlvdXIgZGF0ZSAmYW1wOyB0aW1lIHNldHRpbmdzIGFuZCByZXN0YXJ0IHRoZSBicm93c2VyLicpOwp9CndpbmRvdy5mb2N1c0xvZ2luSW5wdXQgPSBmdW5jdGlvbigpIHsKICBzY3JvbGxUb1RvcCgwKTsKICBub3RhQmVuZSgncXVpY2tfZW1haWwnKTsKfQp3aW5kb3cuY2hhbmdlUXVpY2tSZWdCdXR0b24gPSBmdW5jdGlvbihub1Nob3cpIHsKICBpZiAobm9TaG93KSB7CiAgICBoaWRlKCd0b3BfcmVnX2xpbmsnLCAncXVpY2tfcmVnX2J1dHRvbicpOwogIH0gZWxzZSB7CiAgICBzaG93KCd0b3BfcmVnX2xpbmsnLCAncXVpY2tfcmVnX2J1dHRvbicpOwogIH0KICB0b2dnbGUoJ3RvcF9zd2l0Y2hfbGFuZycsIG5vU2hvdyAmJiB3aW5kb3cubGFuZ0NvbmZpZyAmJiB3aW5kb3cubGFuZ0NvbmZpZy5pZCAhPSAzKTsKfQp3aW5kb3cuc3VibWl0UXVpY2tMb2dpbkZvcm0gPSBmdW5jdGlvbihlbWFpbCwgcGFzcywgb3B0cykgewogIHNldFF1aWNrTG9naW5EYXRhKGVtYWlsLCBwYXNzLCBvcHRzKTsKICBpZiAob3B0cyAmJiBvcHRzLnByZykgcHJnQnRuID0gb3B0cy5wcmc7CiAgaWYgKHFmLm9uc3VibWl0KCkpIHFmLnN1Ym1pdCgpOwp9CndpbmRvdy5zZXRRdWlja0xvZ2luRGF0YSA9IGZ1bmN0aW9uKGVtYWlsLCBwYXNzLCBvcHRzKSB7CiAgaWYgKGVtYWlsICE9PSB1bmRlZmluZWQpIGdlKCdxdWlja19lbWFpbCcpLnZhbHVlID0gZW1haWw7CiAgaWYgKHBhc3MgIT09IHVuZGVmaW5lZCkgZ2UoJ3F1aWNrX3Bhc3MnKS52YWx1ZSA9IHBhc3M7CiAgdmFyIHBhcmFtcyA9IG9wdHMgJiYgb3B0cy5wYXJhbXMgfHwge307CiAgZWFjaCAocGFyYW1zLCBmdW5jdGlvbihpLCB2KSB7CiAgICB2YXIgZWwgPSBnZSgncXVpY2tfJyArIGkpIHx8IGdlKCdxdWlja19sb2dpbl8nICsgaSk7OwogICAgaWYgKGVsKSB7CiAgICAgIHZhbChlbCwgcGFyYW1zW2ldKTsKICAgIH0gZWxzZSB7CiAgICAgIHFmLmFwcGVuZENoaWxkKGNlKCdpbnB1dCcsIHt0eXBlOiAnaGlkZGVuJywgbmFtZTogaSwgaWQ6ICdxdWlja19sb2dpbl8nICsgaSwgdmFsdWU6IHZ9KSk7CiAgICB9CiAgfSk7Cn0Kd2luZG93LmxvZ2luQnlDcmVkZW50aWFsID0gZnVuY3Rpb24oKSB7CiAgaWYgKCFicm93c2VyRmVhdHVyZXMuY21hRW5hYmxlZCB8fCAhd2luZG93LnN1Ym1pdFF1aWNrTG9naW5Gb3JtIHx8IHdpbmRvdy5fbG9naW5CeUNyZWRPZmZlcmVkKSByZXR1cm4gZmFsc2U7CgogIF9sb2dpbkJ5Q3JlZE9mZmVyZWQgPSB0cnVlOwogIG5hdmlnYXRvci5jcmVkZW50aWFscy5nZXQoewogICAgcGFzc3dvcmQ6IHRydWUsCiAgICBtZWRpYXRpb246ICdyZXF1aXJlZCcKICB9KS50aGVuKGZ1bmN0aW9uKGNyZWQpIHsKICAgIGlmIChjcmVkKSB7CiAgICAgIHN1Ym1pdFF1aWNrTG9naW5Gb3JtKGNyZWQuaWQsIGNyZWQucGFzc3dvcmQpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9KTsKfQoKaWYgKHFsYikgewogIHFsYi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IGlmIChxZi5vbnN1Ym1pdCgpKSBxZi5zdWJtaXQoKTsgfTsKfQoKaWYgKGJyb3dzZXIub3BlcmFfbW9iaWxlKSBzaG93KCdxdWlja19leHBpcmUnKTsKCmlmICgxKSB7CiAgaGlkZSgnc3VwcG9ydF9saW5rX3RkJywgJ3RvcF9zdXBwb3J0X2xpbmsnKTsKfQp2YXIgdHNfaW5wdXQgPSBnZSgndHNfaW5wdXQnKTsKaWYgKHRzX2lucHV0KSB7CiAgcGxhY2Vob2xkZXJTZXR1cCh0c19pbnB1dCwge2JhY2s6IGZhbHNlLCByZWxvYWQ6IHRydWUsIHBoQ29sb3I6ICcjOGZhZGM4J30pOwp9ClRvcFNlYXJjaC5pbml0KCk7O3dpbmRvdy5zaG9ydEN1cnJlbmN5ICYmIHNob3J0Q3VycmVuY3koKTsKd2luZG93LnpOYXYgJiYgc2V0VGltZW91dCh6TmF2LnBiaW5kKHt9LCB7cXVldWU6MX0pLCAwKTsKd2luZG93LmhhbmRsZVBhZ2VQYXJhbXMgJiYgaGFuZGxlUGFnZVBhcmFtcyh7ImlkIjowLCJub19hZHMiOjEsImxvYyI6Ij9hY3Q9cyZvaWQ9MTcxNzQyNzAmdmlkPTE2NzA3MDA5MCIsIndyYXBfcGFnZSI6MSwid2lkdGgiOjk2MCwid2lkdGhfZGVjIjoxNjUsIndpZHRoX2RlY19mb290ZXIiOjE2NSwidG9wX2hvbWVfbGlua19jbGFzcyI6InRvcF9ob21lX2xpbmsgZmxfbCAiLCJib2R5X2NsYXNzIjoibWFjIHNmICIsImNvdW50ZXJzIjoiIiwicHZiaWciOjAsInB2ZGFyayI6MX0pO2FkZEV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCBvbkRvY3VtZW50Q2xpY2spOwphZGRMYW5nS2V5cyh7Imdsb2JhbF9hcHBzIjoiQXBwcyIsImdsb2JhbF9mcmllbmRzIjoiRnJpZW5kcyIsImdsb2JhbF9jb21tdW5pdGllcyI6IkNvbW11bml0aWVzIiwiaGVhZF9zZWFyY2hfcmVzdWx0cyI6IlNlYXJjaCByZXN1bHRzIiwiZ2xvYmFsX2NoYXRzIjoiQ29udmVyc2F0aW9ucyIsImdsb2JhbF9zaG93X2FsbF9yZXN1bHRzIjoiU2hvdyBhbGwgcmVzdWx0cyIsImdsb2JhbF9uZXdzX3NlYXJjaF9yZXN1bHRzIjoiU2VhcmNoIHJlc3VsdHMgYnkgbmV3cyIsImdsb2JhbF9lbW9qaV9jYXRfcmVjZW50IjoiRnJlcXVlbnRseSBVc2VkIiwiZ2xvYmFsX2Vtb2ppX2NhdF8xIjoiRmFjZXMiLCJnbG9iYWxfZW1vamlfY2F0XzIiOiJBbmltYWxzICZhbXA7IE5hdHVyZSIsImdsb2JhbF9lbW9qaV9jYXRfMyI6IkhhbmRzICZhbXA7IFBlb3BsZSIsImdsb2JhbF9lbW9qaV9jYXRfNCI6IkZvb2QgJmFtcDsgRHJpbmsiLCJnbG9iYWxfZW1vamlfY2F0XzUiOiJBY3Rpdml0eSIsImdsb2JhbF9lbW9qaV9jYXRfNiI6IlRyYXZlbCAmYW1wOyBUcmFuc3BvcnQiLCJnbG9iYWxfZW1vamlfY2F0XzciOiJPYmplY3RzIiwiZ2xvYmFsX2Vtb2ppX2NhdF84IjoiU3ltYm9scyIsImdsb2JhbF9lbW9qaV9jYXRfOSI6IkZsYWdzIiwic3Rvcmllc19yZW1vdmVfd2FybmluZyI6IkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBzdG9yeT88YnI+VGhpcyBjYW5ub3QgYmUgdW5kb25lLiIsInN0b3JpZXNfcmVtb3ZlX2NvbmZpcm0iOiJZZXMsIGRlbGV0ZSIsInN0b3JpZXNfYW5zd2VyX3BsYWNlaG9sZGVyIjoiWW91ciBtZXNzYWdlhSIsInN0b3JpZXNfYW5zd2VyX3NlbnQiOiJNZXNzYWdlIHNlbnQiLCJzdG9yaWVzX2JsYWNrbGlzdF90aXRsZSI6IkhpZGRlbiBmcm9tIFN0b3JpZXMiLCJzdG9yaWVzX3NldHRpbmdzIjoiU2V0dGluZ3MiLCJzdG9yaWVzX2FkZF9ibGFja2xpc3RfdGl0bGUiOiJIaWRlIGZyb20gc3RvcmllcyIsInN0b3JpZXNfYWRkX2JsYWNrbGlzdF9tZXNzYWdlIjoiVGhpcyB1c2VyJiMzOTtzIHN0b3JpZXMgd29uJiMzOTt0IGFwcGVhciBpbiB5b3VyIGZlZWQsIGJ1dCB5b3UmIzM5O2xsIHN0YXkgZnJpZW5kcy4iLCJzdG9yaWVzX2FkZF9ibGFja2xpc3RfYnV0dG9uIjoiSGlkZSBmcm9tIHN0b3JpZXMiLCJzdG9yaWVzX2FkZF9ibGFja2xpc3RfbWVzc2FnZV9ncm91cCI6IlRoaXMgY29tbXVuaXR5JiMzOTtzIHN0b3JpZXMgd29uJiMzOTt0IGFwcGVhciBpbiB5b3VyIGZlZWQsIGJ1dCB5b3UmIzM5O2xsIHN0aWxsIGJlIGEgZm9sbG93ZXIuIiwic3Rvcmllc19lcnJvcl9jYW50X2xvYWQiOiJVbmFibGUgdG8gbG9hZCB0aGUgc3RvcnkuIiwic3Rvcmllc190cnlfYWdhaW4iOiJUcnkgYWdhaW4iLCJzdG9yaWVzX2Vycm9yX2V4cGlyZWQiOiJUaGUgc3RvcnkgY291bGQgYmUgdmlld2VkPGJyPndpdGhpbiAyNCBob3VycyBhZnRlciBwdWJsaWNhdGlvbiIsInN0b3JpZXNfZXJyb3JfZGVsZXRlZCI6IlN0b3J5IGRlbGV0ZWQiLCJzdG9yaWVzX2Vycm9yX3ByaXZhdGUiOiJTdG9yeSBoaWRkZW4gYnkgYXV0aG9yIiwic3Rvcmllc19tYXNrX3Rvb2x0aXAiOiJUcnkgdGhpcyBtYXNrIiwic3Rvcmllc19tYXNrX3NlbnQiOiJNYXNrIHNlbnQgdG8gcGhvbmUiLCJzdG9yaWVzX2ZvbGxvd2VkIjoiU3RhcnRlZCBmb2xsb3dpbmcmIzMzOyIsInN0b3JpZXNfdW5mb2xsb3dlZCI6IllvdSYjMzk7dmUgdW5mb2xsb3dlZCIsInN0b3JpZXNfaXNfYWQiOiJBZHZlcnRpc21lbnQiLCJzdG9yaWVzX3ByaXZhdGVfc3RvcnkiOiJQcml2YXRlPGJyPnN0b3J5Iiwic3Rvcmllc19kZWxldGVkX3N0b3J5IjoiU3Rvcnk8YnI+ZGVsZXRlZCIsInN0b3JpZXNfYmFkX2Jyb3dzZXIiOiJTdG9yaWVzIGFyZSBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgYnJvd3NlciIsInN0b3JpZXNfZGVsZXRlX2FsbF9yZXBsaWVzX2NvbmZpcm0iOiJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIGFsbCBvZiB7bmFtZX0mIzM5O3MgcmVwbGllcyBmcm9tIGxhc3QgMjQgaG91cnM/PGJyPlRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUuIiwic3Rvcmllc19oaWRlX3JlcGx5X2J1dHRvbiI6IkhpZGUgcmVwbHkiLCJzdG9yaWVzX3JlcGx5X2hpZGRlbiI6IlN0b3J5IHJlcGx5IGhpZGRlbi4iLCJzdG9yaWVzX3Jlc3RvcmUiOiJSZXN0b3JlIiwic3Rvcmllc19oaWRlX3JlcGx5X2NvbnRpbnVlIjoiUmV0dXJuIHRvIHJlcGxpZXMiLCJzdG9yaWVzX2hpZGVfYWxsX3JlcGxpZXMiOlsiIiwiSGlkZSBhbGwgb2YgaGlzIHJlcGxpZXMgZnJvbSB0aGUgbGFzdCAyNCBob3VycyIsIkhpZGUgYWxsIG9mIGhlciByZXBsaWVzIGZyb20gdGhlIGxhc3QgMjQgaG91cnMiXSwic3Rvcmllc19yZXBseV9hZGRfdG9fYmxhY2tsaXN0IjoiQWRkIHRvIGJsYWNrbGlzdCIsInN0b3JpZXNfaGlkZV9yZXBseV93YXJuaW5nIjoiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGhpZGUgdGhpcyByZXBseT88YnI+VGhpcyBjYW5ub3QgYmUgdW5kb25lLiIsInN0b3JpZXNfcmVwbGllc19tb3JlX2J1dHRvbiI6WyIiLCJTaG93ICVzIG1vcmUgY29tbWVudGVyIiwiU2hvdyAlcyBtb3JlIGNvbW1lbnRlcnMiXSwic3Rvcmllc19hbGxfcmVwbGllc19oaWRkZW4iOiJBbGwgcmVwbGllcyBoaWRkZW4iLCJzdG9yaWVzX2Jhbl9jb25maXJtIjoiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGFkZCB7bmFtZX0gdG8gdGhlIGJsYWNrbGlzdD88YnI+VGhpcyBjYW5ub3QgYmUgdW5kb25lLiIsInN0b3JpZXNfYmFubmVkIjoiVGhlIHVzZXIgaGFzIGJlZW4gYmxhY2tsaXN0ZWQiLCJzdG9yaWVzX3NoYXJlIjoiU2hhcmUiLCJzdG9yaWVzX2ZvbGxvdyI6IkZvbGxvdyIsInN0b3JpZXNfdW5mb2xsb3ciOiJVbmZvbGxvdyIsInN0b3JpZXNfcmVwb3J0IjoiUmVwb3J0Iiwic3Rvcmllc19yZXBvcnRfc2VudCI6IlJlcG9ydCBzZW50In0sIHRydWUpOwphZGRUZW1wbGF0ZXMoeyJfIjoiXyJ9KTtnZSgnbXNnX2JhY2tfYnV0dG9uJykub25jbGljayA9IGZ1bmN0aW9uKCkgewogIGhpc3RvcnkuZ28oLTEpOwp9OzsgVGltZVNwZW50ICYmIFRpbWVTcGVudC5zZXRUaW1lcnMgJiYgVGltZVNwZW50LnNldFRpbWVycygzMDAwLCAxMDAwMCk7IFRpbWVTcGVudCAmJiBUaW1lU3BlbnQudXBkYXRlICYmIFRpbWVTcGVudC51cGRhdGUoZmFsc2UpOwo7KGZ1bmN0aW9uIChkLCB3KSB7CmlmICh3Ll9fZGV2KSB7CiAgcmV0dXJuCn0KdmFyIHRzID0gZC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsgdHMudHlwZSA9ICJ0ZXh0L2phdmFzY3JpcHQiOyB0cy5hc3luYyA9IHRydWU7CnRzLnNyYyA9IChkLmxvY2F0aW9uLnByb3RvY29sID09ICJodHRwczoiID8gImh0dHBzOiIgOiAiaHR0cDoiKSArICIvL3RvcC1md3oxLm1haWwucnUvanMvY29kZS5qcyI7CnZhciBmID0gZnVuY3Rpb24gKCkge3ZhciBzID0gZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IilbMF07IHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodHMsIHMpO307CmlmICh3Lm9wZXJhID09ICJbb2JqZWN0IE9wZXJhXSIpIHsgZC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgZiwgZmFsc2UpOyB9IGVsc2UgeyBmKCk7IH0KfSkoZG9jdW1lbnQsIHdpbmRvdyk7CiAgICB9CiAgPC9zY3JpcHQ+CjwvYm9keT4KCjwvaHRtbD4=
    http_version: 
  recorded_at: Wed, 30 May 2018 01:38:24 GMT
recorded_with: VCR 4.0.0
